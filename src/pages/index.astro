---
import Title from "../components/Title.astro";
import Cursor from "../components/Cursor.astro";
import "../globals.css";
import ScrollIndicator from "../components/ScrollIndicator.astro";
import ItemsPage from "../components/ItemsPage.astro";
import Main from "../layouts/main.astro";
---

<Main>
  <div data-scroll-container class="overflow-y-scroll">
    <div class="place-items-center grid h-screen relative">
      <Title />
      <ScrollIndicator />
    </div>
    <div class="flex justify-center px-[10%] pb-[10%] w-screen">
      <iframe width="1237" height="686" class="cursor-pointer hide-cursor z-50 rounded-lg" src="https://www.youtube.com/embed/oFtIIDcZo80" title="Demo Reel 2022" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
    </div>
  </div>
</Main>

<script
  is:inline
  src="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.min.js"
></script>
<script
  is:inline
  src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"
></script>
<script
  is:inline
  src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"
></script>

<script is:inline>

/*
// Video editing slide
gsap.fromTo("[scroll-hide]",{
  opacity: 0,
  ease: "power4.out",
  duration: 3,
  markers: false,
  scrollTrigger: {
    trigger: "[scroll-hide]",
    start: "top 80%",
    end: "bottom 80%",
    scrub: true,
  }
});*/

</script>

<script is:inline>

  var scroll = new LocomotiveScroll({
    el: document.querySelector("[data-scroll-container]"),
    smooth: true,
    getDirection: true,
    lerp: 0.05,
    allowTouchMove: true,
    smartphone: {
      smooth: true,
    },
  });

  const iframe = document.querySelector('iframe');
  iframe.setAttribute('scrolling', 'no');

/*
  gsap.registerPlugin('ScrollTrigger');
  ScrollTrigger.defaults({
    scroller: "[data-scroll-container]",
    markers: true,
  });

  ScrollTrigger.scrollerProxy("[data-scroll-container]", {
    scrollTop(value) {
      return arguments.length
        ? scroll.scrollTo(value, 0, 0)
        : scroll.scroll.instance.scroll.y;
    },
    getBoundingClientRect() {
      return { top: 0, left: 0, width: window.innerWidth, height: window.innerHeight };
    },
    pinType: document.querySelector("[data-scroll-container]").style.transform ? "transform" : "fixed"
  });

  ScrollTrigger.addEventListener("refresh", () => scroll.update());
  ScrollTrigger.refresh();*/

  scroll.on("scroll", () => {
    ScrollTrigger.update();
    document.documentElement.setAttribute("data-scrolling", instance.direction);

    const scrollIndicator = document.querySelector(".bounce");
    scrollIndicator.classList.add("hide");
  });
</script>

<style>
  .highlight {
    @apply block;
    user-select: none;
    background: linear-gradient(
      30deg,
      rgba(37, 99, 235, 1) 0%,
      rgba(192, 132, 252, 1) 45%,
      rgba(192, 132, 252, 0) 50%
    );
    background-clip: text;
    -webkit-background-clip: text; /* Safari/Chrome */
    -moz-background-clip: text; /* Firefox */
    color: transparent;
    background-size: 250%;
  }
</style>
